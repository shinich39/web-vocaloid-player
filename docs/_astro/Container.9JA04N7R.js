import{r as n}from"./index.WFquGv8Z.js";var y={exports:{}},p={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w;function _(){if(w)return p;w=1;var i=Symbol.for("react.transitional.element"),j=Symbol.for("react.fragment");function a(f,s,l){var o=null;if(l!==void 0&&(o=""+l),s.key!==void 0&&(o=""+s.key),"key"in s){l={};for(var c in s)c!=="key"&&(l[c]=s[c])}else l=s;return s=l.ref,{$$typeof:i,type:f,key:o,ref:s!==void 0?s:null,props:l}}return p.Fragment=j,p.jsx=a,p.jsxs=a,p}var E;function z(){return E||(E=1,y.exports=_()),y.exports}var e=z();function M(){const[i,j]=n.useState(),[a,f]=n.useState([]),[s,l]=n.useState(null),[o,c]=n.useState([]),[S,k]=n.useState([]),[d,v]=n.useState(0),[u,A]=n.useState(10),[h,m]=n.useState(["nicovideo","piapro","youtube"]),[x,P]=n.useState("");function R(t){t.sort(()=>Math.random()-.5)}const T=()=>{const t=Math.min(o.length-u,d+u);v(t)},b=()=>{const t=Math.max(0,d-u);v(t)},C=t=>{l(t)};return n.useEffect(()=>{(async()=>{const r=await(await fetch("/web-vocaloid-player/datasets/latest.json",{method:"GET"})).json();j(r)})(),(async()=>{const t=await fetch("/web-vocaloid-player/datasets/data.json.gz",{method:"GET",headers:{"Content-Encoding":"gzip"}});if(t.headers.get("content-encoding")==="gzip"){const r=await t.json();f(r)}})()},[]),n.useEffect(()=>{!i||!a||console.log(i,a)},[i,a]),n.useEffect(()=>{if(!i||!a)return;const t=[];for(const r of a)h.includes(r.type)&&(x&&!r.title.includes(x)||t.push(r));R(t),c(t)},[i,a,x,h]),n.useEffect(()=>{const t=o.slice(d,d+u);k(t)},[o,u,d]),e.jsxs(e.Fragment,{children:[e.jsxs("section",{children:[e.jsx("h2",{children:"Datasets"}),e.jsx("ul",{children:!i||!a?e.jsx("li",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("li",{children:["Nicovideo: ",i.nicovideo.size,", ",i.nicovideo.updatedAt]}),e.jsxs("li",{children:["Piapro: ",i.piapro.size,", ",i.piapro.updatedAt]}),e.jsxs("li",{children:["DC (Mixed types): ",i.dc.size,", ",i.dc.updatedAt]})]})})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Search"}),e.jsx("div",{children:["nicovideo","piapro","youtube"].map((t,r)=>{const g=h.includes(t);return e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",value:t,onClick:()=>{m(g?h.filter(F=>F!==t):[...new Set(h),t])},defaultChecked:g}),t]},`type-checkbox-${r}`)})}),e.jsx("div",{children:e.jsx("input",{type:"text",value:x,onChange:t=>P(t.target.value),placeholder:"Type text to search"})})]}),e.jsxs("section",{children:[e.jsxs("h2",{children:["Playlist (",o.length,")"]}),e.jsxs("div",{children:[e.jsx("button",{onClick:b,children:"Prev"})," ",e.jsx("button",{onClick:T,children:"Next"})]}),e.jsx("ol",{children:S.map((t,r)=>e.jsxs("li",{children:["[",t.type,"]"," ",t.title," ",e.jsx("button",{onClick:()=>C(t),children:"Play"})," ",e.jsx("a",{href:t.originalUrl,children:"Link"})]},`playlist-${r}`))})]}),e.jsx("section",{children:s&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:e.jsx("a",{href:s.originalUrl,children:s.title})}),s.type==="youtube"?e.jsx(e.Fragment,{children:e.jsx("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/"+s.id,title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):s.type==="nicovideo"?e.jsx(e.Fragment,{children:e.jsx("iframe",{width:"640",height:"360",src:"https://embed.nicovideo.jp/watch/"+s.id,allowFullScreen:!0})}):s.type==="piapro"?e.jsx(e.Fragment,{children:e.jsx("iframe",{src:"https://piapro.jp/widget/"+s.id,width:"512",height:"360",allow:"autoplay"})}):null]})})]})}export{M as default};
