import{r}from"./index.WFquGv8Z.js";var y={exports:{}},p={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g;function _(){if(g)return p;g=1;var i=Symbol.for("react.transitional.element"),j=Symbol.for("react.fragment");function l(f,s,a){var o=null;if(a!==void 0&&(o=""+a),s.key!==void 0&&(o=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:i,type:f,key:o,ref:s!==void 0?s:null,props:a}}return p.Fragment=j,p.jsx=l,p.jsxs=l,p}var S;function A(){return S||(S=1,y.exports=_()),y.exports}var e=A();function z(){const[i,j]=r.useState(),[l,f]=r.useState([]),[s,a]=r.useState(null),[o,c]=r.useState([]),[E,k]=r.useState([]),[d,v]=r.useState(0),[u,L]=r.useState(10),[h,m]=r.useState(["nicovideo","piapro","youtube"]),[x,P]=r.useState("");function R(t){t.sort(()=>Math.random()-.5)}const T=()=>{const t=Math.min(o.length-u,d+u);v(t)},b=()=>{const t=Math.max(0,d-u);v(t)},C=t=>{a(t)};return r.useEffect(()=>{(async()=>{const n=await(await fetch("/web-vocaloid-player/datasets/latest.json",{method:"GET"})).json();j(n)})(),(async()=>{const t=await fetch("/web-vocaloid-player/datasets/data.json.gz",{method:"GET"});if(t.headers.get("content-encoding")==="gzip"){const n=await t.json();f(n)}})()},[]),r.useEffect(()=>{!i||!l||console.log(i,l)},[i,l]),r.useEffect(()=>{if(!i||!l)return;const t=[];for(const n of l)h.includes(n.type)&&(x&&!n.title.includes(x)||t.push(n));R(t),c(t)},[i,l,x,h]),r.useEffect(()=>{const t=o.slice(d,d+u);k(t)},[o,u,d]),e.jsxs(e.Fragment,{children:[e.jsxs("section",{children:[e.jsx("h2",{children:"Datasets"}),e.jsx("ul",{children:!i||!l?e.jsx("li",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs("li",{children:["Nicovideo: ",i.nicovideo.size,", ",i.nicovideo.updatedAt]}),e.jsxs("li",{children:["Piapro: ",i.piapro.size,", ",i.piapro.updatedAt]}),e.jsxs("li",{children:["DC (Mixed types): ",i.dc.size,", ",i.dc.updatedAt]})]})})]}),e.jsxs("section",{children:[e.jsx("h2",{children:"Search"}),e.jsx("div",{children:["nicovideo","piapro","youtube"].map((t,n)=>{const w=h.includes(t);return e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",value:t,onClick:()=>{m(w?h.filter(F=>F!==t):[...new Set(h),t])},defaultChecked:w}),t]},`type-checkbox-${n}`)})}),e.jsx("div",{children:e.jsx("input",{type:"text",value:x,onChange:t=>P(t.target.value),placeholder:"Type text to search"})})]}),e.jsxs("section",{children:[e.jsxs("h2",{children:["Playlist (",o.length,")"]}),e.jsxs("div",{children:[e.jsx("button",{onClick:b,children:"Prev"})," ",e.jsx("button",{onClick:T,children:"Next"})]}),e.jsx("ol",{children:E.map((t,n)=>e.jsxs("li",{children:["[",t.type,"]"," ",t.title," ",e.jsx("button",{onClick:()=>C(t),children:"Play"})," ",e.jsx("a",{href:t.originalUrl,children:"Link"})]},`playlist-${n}`))})]}),e.jsx("section",{children:s&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{children:e.jsx("a",{href:s.originalUrl,children:s.title})}),s.type==="youtube"?e.jsx(e.Fragment,{children:e.jsx("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/"+s.id,title:"YouTube video player",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):s.type==="nicovideo"?e.jsx(e.Fragment,{children:e.jsx("iframe",{width:"640",height:"360",src:"https://embed.nicovideo.jp/watch/"+s.id,allowFullScreen:!0})}):s.type==="piapro"?e.jsx(e.Fragment,{children:e.jsx("iframe",{src:"https://piapro.jp/widget/"+s.id,width:"512",height:"360",allow:"autoplay"})}):null]})})]})}export{z as default};
